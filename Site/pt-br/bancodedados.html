<!DOCTYPE html>
<html lang="pt">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gráficos</title>
    <link rel="shortcut icon" href="icone.ico">
    <link rel="stylesheet" type="text/css" href="homecss.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.18.1/moment.min.js"></script>
    <script src="http://www.chartjs.org/dist/2.7.1/Chart.js"></script>
    <script src="http://www.chartjs.org/samples/latest/utils.js"></script>
</head>

<style>


</style>


<body class="body">

    <div class="menutopo">
        <div class="container">
            <div>
                <img src="Cultivo Inteligente atualizado 3.png" alt="" onclick="inicio();">
            </div>
            <ul class="navbar">
                <a href="Quemsomos.html" class="btn1"><span>Quem Somos</span></a>
                <a href="Faleconosco.html" class="btn1"><span>Fale Conosco</span></a>
                <a href="Simule.html" class="btn2"><span>Simule</span></a>
                <a href="home1.html" onclick="deslogar()" class="btn3"><span>Sair</span></a>
            </ul>
        </div>

        <script>
            const btn = document.querySelector('.btn');
            btn.onmousemove = function (e) {
                const x = e.pageX - btn.offsetLeft;
                const y = e.pageY - btn.offsetTop;

                btn.style.setProperty('--x', x + 'px');
                btn.style.setProperty('--y', y + 'px');
            }
            const btn1 = document.querySelector('.btn1');
            btn1.onmousemove = function (e) {
                const x = e.pageX - btn1.offsetLeft;
                const y = e.pageY - btn1.offsetTop;

                btn1.style.setProperty('--x', x + 'px');
                btn1.style.setProperty('--y', y + 'px');
            }
            const btn2 = document.querySelector('.btn2');
            btn2.onmousemove = function (e) {
                const x = e.pageX - btn2.offsetLeft;
                const y = e.pageY - btn2.offsetTop;

                btn2.style.setProperty('--x', x + 'px');
                btn2.style.setProperty('--y', y + 'px');
            }
            const btn3 = document.querySelector('.btn3');
            btn3.onmousemove = function (e) {
                const x = e.pageX - btn3.offsetLeft;
                const y = e.pageY - btn3.offsetTop;

                btn3.style.setProperty('--x', x + 'px');
                btn3.style.setProperty('--y', y + 'px');
            }
           
        </script>
    </div>

    <di class="container3">
        <div class="card">
            <div class="content">


                <div class="container_monitoramento">
                    <div class="header_monitoramento">
                        <a class="btn1" id="a_resu" onclick="resu()"><span>Resumido</span></a>
                        <a class="btn1" id="a_avan" onclick="avan()"><span>Avançado</span></a>
                    </div>
                </div>

                <br><br>
                <div id="pag2">
                    <div class="conteudo">
                        <h1>Monitoramento de Umidade:</h1><br>
                        <h2>
                            <div class="div_valores">


                                <div class="nome">Status: </div>
                                <div class="status" id="status_umid" style="background-color: green; text-align: left;">
                                    <span id="realtime_umid">0.00</span>%
                                </div>
                                <div class="nome">Média: </div>
                                <div class="status" id="" style="background-color: gray; text-align: left;"><span
                                        id='average'>0.00</span>%</div>
                                <div class="nome">Mediana: </div>
                                <div class="status" id="" style="background-color: gray; text-align: left;"><span
                                        id='mediana_umid'>0.00</span>%</div>
                                <div class="nome">1° Quartil: </div>
                                <div class="status" id="" style="background-color: gray; text-align: left;"><span
                                        id='1quartil_umid'>0.00</span>%</div>
                                <div class="nome">3° Quartil: </div>
                                <div class="status" id="" style="background-color: gray; text-align: left;"><span
                                        id='3quartil_umid'>0.00</span>%</div>
                            </div><br>
                        </h2>
                        <h1>Alertas:</h1><br>
                        <h2>
                            <div class="div_valores">
                                <div class="nome">Alerta: </div>
                                <div class="status" id=""
                                    style="background-color: rgb(170, 170, 78); text-align: left;">
                                    <span id="umi_cont_yellow">0.00</span>
                                </div>
                                <div class="nome">Emergência: </div>
                                <div class="status" id="" style="background-color: orange; text-align: left;"><span
                                        id='umi_cont_orange'>0.00</span></div>
                                <div class="nome">Crítico: </div>
                                <div class="status" id="" style="background-color: red; text-align: left;"><span
                                        id='umi_cont_red'>0.00</span></div>
                            </div>
                        </h2>
                    </div><br><br>
                    <div class="conteudo">
                        <h1>Monitoramento de Temperatura:</h1><br>
                        <h2>
                            <div class="div_valores">

                                <div class="nome">Status: </div>
                                <div class="status" id="status_temp" style="background-color: green; text-align: left;">
                                    <span id="realtime_temp">0.00</span>°C
                                </div>
                                <div class="nome">Média: </div>
                                <div class="status" id="" style="background-color: gray; text-align: left;"><span
                                        id='average'>0.00</span>°C</div>
                                <div class="nome">Mediana: </div>
                                <div class="status" id="" style="background-color: gray; text-align: left;"><span
                                        id='mediana_temp'>0.00</span>°C</div>
                                <div class="nome">1° Quartil: </div>
                                <div class="status" id="" style="background-color: gray; text-align: left;"><span
                                        id='1quartil_temp'>0.00</span>°C</div>
                                <div class="nome">3° Quartil: </div>
                                <div class="status" id="" style="background-color: gray; text-align: left;"><span
                                        id='3quartil_temp'>0.00</span>°C</div>
                            </div><br>
                        </h2>
                        <h1>Alertas:</h1><br>
                        <h2>
                            <div class="div_valores">

                                <div class="nome">Alerta: </div>
                                <div class="status" id=""
                                    style="background-color: rgb(170, 170, 78); text-align: left;">
                                    <span id="temp_cont_yellow">0.00</span>
                                </div>
                                <div class="nome">Emergência: </div>
                                <div class="status" id="" style="background-color: orange; text-align: left;"><span
                                        id='temp_cont_orange'>0.00</span></div>
                                <div class="nome">Crítico: </div>
                                <div class="status" id="" style="background-color: red; text-align: left;"><span
                                        id='temp_cont_red'>0.00</span></div>
                            </div>
                    </div>




                    </h2>


                    <br><br>

                    <div id="graficos">
                        <div class="graf3">
                            <canvas id="chart3"></canvas>
                        </div>
                        <div class="graf4">
                            <canvas id="chart4"></canvas>
                        </div>
                    </div>











                </div>
            </div>
            <div id="pag1" style="display: none;">
                <div>
                    <h1 style="color: white;">Sensor DHT 11 - Umidade</h1>
                    <br>
                    <br>
                    <h2>
                        <div class="div_valores"><br>

                            <div class="nome">Status: </div>
                            <div class="status" id="status_umid" style="background-color: green; text-align: left;">
                                <span id="realtime_umid">0.00</span>%
                            </div>
                            <div class="nome">Média: </div>
                            <div class="status" id="" style="background-color: gray; text-align: left;"><span
                                    id='average'>0.00</span>%</div>
                            <div class="nome">Mediana: </div>
                            <div class="status" id="" style="background-color: gray; text-align: left;"><span
                                    id='mediana_umid'>0.00</span>%</div>
                            <div class="nome">1° Quartil: </div>
                            <div class="status" id="" style="background-color: gray; text-align: left;"><span
                                    id='1quartil_umid'>0.00</span>%</div>
                            <div class="nome">3° Quartil: </div>
                            <div class="status" id="" style="background-color: gray; text-align: left;"><span
                                    id='3quartil_umid'>0.00</span>%</div>
                    </h2>
                </div>

                <div><br><br>
                    <div class="bloco">

                        <div class="graf1">
                            <canvas id="chart"></canvas>
                        </div>
                        <div class="logs" id="logs2">
                        </div>
                    </div>
                </div>
                <br><br>

                <br>
                <br> <br><br><br>
                <div>
                    <h1 style="color: white;">Sensor DHT 11 - Temperatura</h1>
                    <br>
                    <br>
                    <h2>
                        <div class="div_valores"><br>

                            <div class="nome">Status: </div>
                            <div class="status" id="status_temp" style="background-color: green; text-align: left;">
                                <span id="realtime_temp">0.00</span>°C
                            </div>
                            <div class="nome">Média: </div>
                            <div class="status" id="" style="background-color: gray; text-align: left;"><span
                                    id='average'>0.00</span>°C</div>
                            <div class="nome">Mediana: </div>
                            <div class="status" id="" style="background-color: gray; text-align: left;"><span
                                    id='mediana_temp'>0.00</span>°C</div>
                            <div class="nome">1° Quartil: </div>
                            <div class="status" id="" style="background-color: gray; text-align: left;"><span
                                    id='1quartil_temp'>0.00</span>°C</div>
                            <div class="nome">3° Quartil: </div>
                            <div class="status" id="" style="background-color: gray; text-align: left;"><span
                                    id='3quartil_temp'>0.00</span>°C</div>
                    </h2>
                </div>
                <br><br>
                <div class="bloco">

                    <div class="graf2">
                        <canvas id="chart2"></canvas>
                    </div>
                    <div class="logs" id="logs2">

                    </div>
                </div>
                <br><br>
            </div>
            <br><br><br>
        </div>
        </div>
</body>

</html>
<script>

    var cont2 = 0;
    var cont = 0;
    var temp = [];
    var umi = [];
    var mediatemp = [];
    var mediaumi = [];
    var esq_umi = 0;
    var dir_umi = 0;
    var meio_umi = 0;
    var esq_temp = 0;
    var dir_temp = 0;
    var meio_temp = 0;
    var prim_quartil_temp = 0;
    var terc_quartil_temp = 0;
    var terc_quartil_umid = 0;
    var prim_quartil_umid = 0;
    var resto_umi = 0;
    var resto_temp = 0;
    var f_temp = 0;
    var f_umi = 0;
    var terc_resto_umi = 0;
    var terc_resto_temp = 0;
    var terc_f_temp = 0;
    var terc_f_umi = 0;
    var umi_contr = 0;
    var umi_conto = 0;
    var umi_conty = 0;
    var temp_contr = 0;
    var temp_conto = 0;
    var temp_conty = 0;


    var context = document.getElementById("chart").getContext("2d");
    context.canvas.width = 1000;
    context.canvas.height = 300;

    var configuration = {
        type: 'line',
        data: {
            datasets: [{
                label: "Umidade (%)",
                borderColor: '#34baeb',
                backgroundColor: '#34baeb50',
            }]
        },
        options: {
            scales: {
                xAxes: [{
                    distribution: 'series',
                    ticks: {
                        beginAtZero: true
                    }
                }],
                yAxes: [{
                    scaleLabel: {
                        display: true,
                        labelString: 'Umidade (%)'
                    },
                    ticks: {
                        beginAtZero: true
                    }
                }]
            },
            animation: {
                duration: 0
            }
        }
    };
    var context2 = document.getElementById("chart2").getContext("2d");
    context2.canvas.width = 1000;
    context2.canvas.height = 300;

    var configuration2 = {
        type: 'line',
        data: {
            datasets: [{
                label: "Temperatura (°C)",
                borderColor: '#eb4444',
                backgroundColor: '#eb444450',
            }]
        },
        options: {
            scales: {
                xAxes: [{
                    distribution: 'series',
                    ticks: {
                        beginAtZero: true
                    }
                }],
                yAxes: [{
                    scaleLabel: {
                        display: true,
                        labelString: 'Temperatura (°C)'
                    },
                    ticks: {
                        beginAtZero: true
                    }
                }]
            },
            animation: {
                duration: 0
            }
        }
    };
    var context3 = document.getElementById("chart3").getContext("2d");
    context3.canvas.width = 1000;
    context3.canvas.height = 300;

    var configuration3 = {
        type: 'line',
        data: {
            datasets: [
                {
                    label: "Alerta",
                    borderColor: '#eabd38',
                    backgroundColor: '#eabd3850',
                },
                {
                    label: "Emergência",
                    borderColor: '#de542c',
                    backgroundColor: '#de542c50',
                },
                {
                    label: "Crítico",
                    borderColor: '#820401',
                    backgroundColor: '#82040150',
                }



            ]
        },
        options: {
            title: {
                display: true,
                text: 'Alertas de Temperatura'
            },
            scales: {
                xAxes: [{
                    distribution: 'series',
                    ticks: {
                        beginAtZero: true
                    }
                }],
                yAxes: [{
                    scaleLabel: {
                        display: true,
                        labelString: 'Quantidade de Alertas'
                    },
                    ticks: {
                        beginAtZero: true
                    }
                }]
            },
            animation: {
                duration: 0
            }
        }
    };
    var context4 = document.getElementById("chart4").getContext("2d");
    context4.canvas.width = 1000;
    context4.canvas.height = 300;

    var configuration4 = {
        type: 'line',
        data: {
            datasets: [
                {
                    label: "Alerta",
                    borderColor: '#eabd38',
                    backgroundColor: '#eabd3850',
                },
                {
                    label: "Emergência",
                    borderColor: '#de542c',
                    backgroundColor: '#de542c50',
                },
                {
                    label: "Crítico",
                    borderColor: '#820401',
                    backgroundColor: '#82040150',
                }



            ]
        },
        options: {
            title: {
                display: true,
                text: 'Alertas de Umidade'
            },

            scales: {
                xAxes: [{
                    distribution: 'series',
                    ticks: {
                        beginAtZero: true
                    }
                }],
                yAxes: [{
                    scaleLabel: {
                        display: true,
                        labelString: 'Quantidade de Alertas'
                    },
                    ticks: {
                        beginAtZero: true
                    }
                }]
            },
            animation: {
                duration: 0
            }
        }
    };
    var chart4 = new Chart(context4, configuration4);
    var chart3 = new Chart(context3, configuration3);
    var chart2 = new Chart(context2, configuration2);
    var chart = new Chart(context, configuration);

    this.lastIndexTemp = 0;
    this.time = 0;

    function get_data() {

        var http = new XMLHttpRequest();
        http.open('GET', 'http://localhost:3000/api', false);
        http.send(null);

        var obj = JSON.parse(http.responseText);
        if (obj.data.length == 0) {
            return;
        }







        var _lastIndexTemp = this.lastIndexTemp;
        this.lastIndexTemp = obj.data.length;
        listTemp = obj.data.slice(_lastIndexTemp);

        listTemp.forEach(data => {
            if (chart.data.labels.length == 10 && chart.data.datasets[0].data.length == 10) {
                chart.data.labels.shift();
                chart.data.datasets[0].data.shift();
            }

            chart.data.labels.push(this.time++);
            chart.data.datasets[0].data.push(parseFloat(data[0]));
            chart.update();
        });



        listTemp.forEach(data => {
            if (chart2.data.labels.length == 10 && chart2.data.datasets[0].data.length == 10) {
                chart2.data.labels.shift();
                chart2.data.datasets[0].data.shift();
            }

            chart2.data.labels.push(this.time++);
            chart2.data.datasets[0].data.push(parseFloat(data[1]));
            chart2.update();

        });






        listTemp.forEach(data => {
            cont += 2;

            for (let k = 0; k <= 1; k++){
                cont2++;
                if((cont2 % 10) == 0){
                    validacoes();
                }
            }

            for (let i = 0; i <= 1; i++) {

                temp.push(parseFloat(data[1]));
                umi.push(parseFloat(data[0]));

                if (data[1] >= 24.5) {
                    temp_contr++;
                    let data_realtime = new Date();
                    document.getElementById('status_temp').style.backgroundColor = 'red';
                    logs2.innerHTML += (`<p style="color: red">ATENÇÃO!! A Temperatura da sua estufa está em estado crítico! (x${temp_contr}) - ${data_realtime}</p><br>`);
                    document.getElementById('temp_cont_red').textContent = temp_contr;
                }


                if (data[1] >= 23.5 && data[1] < 24.5) {
                    temp_conto++;
                    let data_realtime = new Date();
                    document.getElementById('status_temp').style.backgroundColor = 'orange';
                    logs2.innerHTML += (`<p style="color: orange">ATENÇÃO!! A Temperatura da sua estufa está em estado de emergência! (x${temp_conto}) - ${data_realtime}</p><br>`);
                    document.getElementById('temp_cont_orange').textContent = temp_conto;
                }


                if (data[1] < 23.5 && data[1] > 21) {
                    temp_conty++;
                    let data_realtime = new Date();
                    document.getElementById('status_temp').style.backgroundColor = 'yellow';
                    logs2.innerHTML += (`<p style="color: yellow">ATENÇÃO!! A Temperatura da sua estufa está em estado de alerta! (x${temp_conty}) - ${data_realtime}</p><br>`);
                    document.getElementById('temp_cont_yellow').textContent = temp_conty;
                }


                if (data[1] < 19 && data[1] > 16.5) {
                    temp_conty++;
                    let data_realtime = new Date();
                    document.getElementById('status_temp').style.backgroundColor = 'yellow';
                    logs2.innerHTML += (`<p style="color: yellow">ATENÇÃO!! A Temperatura da sua estufa está em estado de alerta! (x${temp_conty}) - ${data_realtime}</p><br>`);
                    document.getElementById('temp_cont_yellow').textContent = temp_conty;
                }


                if (data[1] <= 16.5 && esq_temp > 15.5) {
                    temp_conto++;
                    let data_realtime = new Date();
                    document.getElementById('status_temp').style.backgroundColor = 'orange';
                    logs2.innerHTML += (`<p style="color: orange">ATENÇÃO!! A Temperatura da sua estufa está em estado de emergência! (x${temp_conto}) - ${data_realtime}</p><br>`);
                    document.getElementById('temp_cont_orange').textContent = temp_conto;
                }


                if (data[1] <= 15.5) {
                    temp_contr++;
                    let data_realtime = new Date();
                    document.getElementById('status_temp').style.backgroundColor = 'red';
                    logs2.innerHTML += (`<p style="color: red">ATENÇÃO!! A Temperatura da sua estufa está em estado crítico! (x${temp_contr}) - ${data_realtime}</p><br>`);
                    document.getElementById('temp_cont_red').textContent = temp_contr;
                }


                if (data[1] >= 19 && data[1] <= 21) {
                    document.getElementById('status_temp').style.backgroundColor = 'green';
                }

                if (data[0] >= 16.2) {
                    umi_contr++;
                    let data_realtime = new Date();
                    document.getElementById('status_umid').style.backgroundColor = 'red';
                    logs1.innerHTML += (`<p style="color: red">ATENÇÃO!! A Umidade da sua estufa está em estado crítico! (x${umi_contr}) - ${data_realtime}</p><br>`);
                    document.getElementById('umi_cont_red').textContent = umi_contr;
                }


                if (data[0] >= 14.2 && data[0] < 16.2) {
                    umi_conto++;
                    let data_realtime = new Date();
                    document.getElementById('status_umid').style.backgroundColor = 'orange';
                    logs1.innerHTML += (`<p style="color: orange">ATENÇÃO!! A Umidade da sua estufa está em estado de emergência! (x${umi_conto}) - ${data_realtime}</p><br>`);
                    document.getElementById('umi_cont_orange').textContent = umi_conto;
                }


                if (data[0] < 14.2 && data[0] > 11.2) {
                    umi_conty++;
                    let data_realtime = new Date();
                    document.getElementById('status_umid').style.backgroundColor = 'yellow';
                    logs1.innerHTML += (`<p style="color: yellow">ATENÇÃO!! A Umidade da sua estufa está em estado de alerta! (x${umi_conty}) - ${data_realtime}</p><br>`);
                    document.getElementById('umi_cont_yellow').textContent = umi_conty;
                }


                if (data[0] < 10.8 && data[0] > 7.8) {
                    umi_conty++;
                    let data_realtime = new Date();
                    document.getElementById('status_umid').style.backgroundColor = 'yellow';
                    logs1.innerHTML += (`<p style="color: yellow">ATENÇÃO!! A Umidade da sua estufa está em estado de alerta! (x${umi_conty}) - ${data_realtime}</p><br>`);
                    document.getElementById('umi_cont_yellow').textContent = umi_conty;
                }


                if (data[0] <= 7.8 && data[0] > 5.8) {
                    umi_conto++;
                    let data_realtime = new Date();
                    document.getElementById('status_umid').style.backgroundColor = 'orange';
                    logs1.innerHTML += (`<p style="color: orange">ATENÇÃO!! A Umidade da sua estufa está em estado de emergência! (x${umi_conto}) - ${data_realtime}</p><br>`);
                    document.getElementById('umi_cont_orange').textContent = umi_conto;
                }


                if (data[0] <= 5.8) {
                    umi_contr++;
                    let data_realtime = new Date();
                    document.getElementById('status_umid').style.backgroundColor = 'red';
                    logs1.innerHTML += (`<p style="color: red">ATENÇÃO!! A Umidade da sua estufa está em estado crítico! (x${umi_contr}) - ${data_realtime}</p><br>`);
                    document.getElementById('umi_cont_red').textContent = umi_contr;
                }


                if (data[0] >= 10.8 && data[0] <= 11.2) {
                    document.getElementById('status_umid').style.backgroundColor = 'green';
                }

            }

            document.getElementById('realtime_temp').textContent = data[1].toFixed(2);
            document.getElementById('realtime_umid').textContent = data[0].toFixed(2);








            let sum = umi.reduce((a, b) => a + b);
            let sum2 = temp.reduce((a, b) => a + b);


            mediaumi = sum / cont;
            mediatemp = sum2 / cont;
            document.getElementById('average').textContent = mediaumi.toFixed(1);
            document.getElementById('average2').textContent = mediatemp.toFixed(1);



            dir_temp = temp.length - 1;
            esq_temp = temp[0];
            meio_temp = (dir_temp + esq_temp) / 2;

            dir_umi = temp.length - 1;
            esq_umi = temp[0];
            meio_umi = (dir_umi + esq_umi) / 2;

            document.getElementById('mediana_umid').textContent = umi[parseInt(meio_umi)].toFixed(1);
            document.getElementById('mediana_temp').textContent = temp[parseInt(meio_temp)].toFixed(1);






            resto_temp = (dir_temp / 4) % 1;
            f_temp = 1 - resto_temp;
            prim_quartil_temp = temp[parseInt(dir_temp / 4)] + (resto_temp * (temp[parseInt(resto_temp + f_temp)] - temp[parseInt(dir_temp / 4)]));

            resto_umi = (dir_umi / 4) % 1;
            f_umi = 1 - resto_umi;
            prim_quartil_umid = umi[parseInt(dir_umi / 4)] + (resto_umi * (umi[parseInt(resto_umi + f_umi)] - umi[parseInt(dir_umi / 4)]));

            document.getElementById('1quartil_temp').textContent = parseFloat(prim_quartil_temp.toFixed(1));
            document.getElementById('1quartil_umid').textContent = parseFloat(prim_quartil_umid.toFixed(1));





            terc_resto_temp = (3 * (dir_temp / 4)) % 1;
            terc_f_temp = 1 - terc_resto_temp;
            terc_quartil_temp = temp[parseInt(dir_temp / 4)] + (terc_resto_temp * (temp[parseInt(terc_resto_temp + terc_f_temp)] - temp[parseInt(dir_temp / 4)]));

            terc_resto_umi = (3 * (dir_umi / 4)) % 1;
            terc_f_temp = 1 - terc_resto_temp;
            terc_quartil_umid = umi[parseInt(dir_umi / 4)] + (terc_resto_umi * (umi[parseInt(terc_resto_umi + terc_f_umi)] - umi[parseInt(dir_umi / 4)]));

            document.getElementById('3quartil_temp').textContent = terc_quartil_temp.toFixed(1);
            document.getElementById('3quartil_umid').textContent = terc_quartil_umid.toFixed(1);





            listTemp.forEach(data => {
                if (chart3.data.labels.length == 10 && chart3.data.datasets[0].data.length == 10) {
                    chart3.data.labels.shift();
                    chart3.data.datasets[0].data.shift();
                }
                if (chart3.data.labels.length == 10 && chart3.data.datasets[0].data.length == 10) {
                    chart3.data.labels.shift();
                    chart3.data.datasets[1].data.shift();
                }
                if (chart3.data.labels.length == 10 && chart3.data.datasets[0].data.length == 10) {
                    chart3.data.labels.shift();
                    chart3.data.datasets[2].data.shift();
                }
                chart3.data.labels.push(this.time++);
                chart3.data.datasets[0].data.push(parseFloat(temp_conty));
                chart3.update();

                chart3.data.labels.push(this.time++);
                chart3.data.datasets[1].data.push(parseFloat(temp_conto));
                chart3.update();

                chart3.data.labels.push(this.time++);
                chart3.data.datasets[2].data.push(parseFloat(temp_contr));
                chart3.update();
            });




            listTemp.forEach(data => {
                if (chart4.data.labels.length == 10 && chart4.data.datasets[0].data.length == 10) {
                    chart4.data.labels.shift();
                    chart4.data.datasets[0].data.shift();
                }
                if (chart4.data.labels.length == 10 && chart4.data.datasets[0].data.length == 10) {
                    chart4.data.labels.shift();
                    chart4.data.datasets[1].data.shift();
                }
                if (chart4.data.labels.length == 10 && chart4.data.datasets[0].data.length == 10) {
                    chart4.data.labels.shift();
                    chart4.data.datasets[2].data.shift();
                }
                chart4.data.labels.push(this.time++);
                chart4.data.datasets[0].data.push(parseFloat(umi_conty));
                chart4.update();

                chart4.data.labels.push(this.time++);
                chart4.data.datasets[1].data.push(parseFloat(umi_conto));
                chart4.update();

                chart4.data.labels.push(this.time++);
                chart4.data.datasets[2].data.push(parseFloat(umi_contr));
                chart4.update();
            });


        })


            ;


    }

    // setInterval(() => {
    //     get_data();
    // }, 1000);
    a_resu.style.textDecoration = 'Underline';

function validacoes(){
    if (data[1] >= 24.5) {
                    alert('ATENÇÃO!! A Temperatura da sua estufa está em estado crítico!');
                }


                if (data[1] >= 23.5 && data[1] < 24.5) {
                    alert('ATENÇÃO!! A Temperatura da sua estufa está em estado de emergência!');
                }


                if (data[1] < 23.5 && data[1] > 21) {
                    alert('ATENÇÃO!! A Temperatura da sua estufa está em estado de alerta!');
                }


                if (data[1] < 19 && data[1] > 16.5) {
                    alert('ATENÇÃO!! A Temperatura da sua estufa está em estado de alerta!');
                }


                if (data[1] <= 16.5 && esq_temp > 15.5) {
                    alert('ATENÇÃO!! A Temperatura da sua estufa está em estado de emergência!');
                }


                if (data[1] <= 15.5) {
                    alert('ATENÇÃO!! A Temperatura da sua estufa está em estado crítico');
                }


                if (data[1] >= 19 && data[1] <= 21) {
                    document.getElementById('status_temp').style.backgroundColor = 'green';
                }

                if (data[0] >= 16.2) {
                    alert('ATENÇÃO!! A Temperatura da sua estufa está em estado crítico!');
                }


                if (data[0] >= 14.2 && data[0] < 16.2) {
                    alert('ATENÇÃO!! A Temperatura da sua estufa está em estado de emergência!');
                }


                if (data[0] < 14.2 && data[0] > 11.2) {
                    alert('ATENÇÃO!! A Temperatura da sua estufa está em estado de alerta!');
                }


                if (data[0] < 10.8 && data[0] > 7.8) {
                    alert('ATENÇÃO!! A Temperatura da sua estufa está em estado de alerta!');
                }


                if (data[0] <= 7.8 && data[0] > 5.8) {
                    alert('ATENÇÃO!! A Temperatura da sua estufa está em estado de emergência!');
                }


                if (data[0] <= 5.8) {
                    alert('ATENÇÃO!! A Temperatura da sua estufa está em estado crítico!');
                }


                if (data[0] >= 10.8 && data[0] <= 11.2) {
                    document.getElementById('status_umid').style.backgroundColor = 'green';
                }
}

</script>
<script src="scripts.js"></script>